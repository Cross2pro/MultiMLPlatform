(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{8483:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var l=s(5155),r=s(2115);let a=e=>{let{models:t,selectedModel:s,onSelectModel:r}=e;return(0,l.jsxs)("div",{className:"w-full p-4 bg-white rounded-lg shadow-md",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,l.jsx)("h2",{className:"text-lg font-bold text-gray-800",children:"选择预测模型"}),(0,l.jsxs)("span",{className:"text-sm text-gray-500",children:[t.length," 个可用模型"]})]}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:t.map((e,t)=>(0,l.jsxs)("div",{className:"p-3 border rounded-lg cursor-pointer transition-all duration-200 hover:shadow-md ".concat(s===(0===t?"randomForest":"optimalNN")?"bg-blue-50 border-blue-500 shadow-md":"border-gray-200 hover:border-blue-300"),onClick:()=>r(0===t?"randomForest":"optimalNN"),children:[(0,l.jsx)("h3",{className:"font-semibold text-base text-gray-800 mb-2",children:e.name}),(0,l.jsxs)("div",{className:"space-y-1 text-xs text-gray-600",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{children:"准确率:"}),(0,l.jsxs)("span",{className:"font-medium text-blue-600",children:[(100*e.accuracy).toFixed(1),"%"]})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{children:"预测时间:"}),(0,l.jsxs)("span",{className:"font-medium text-green-600",children:[e.predictTime,"ms"]})]})]})]},t))})]})},i=e=>{let{onSubmit:t,isLoading:s}=e,a=[{title:"Configuration Parameters",color:"blue",fields:[{id:"joint_type",label:"Joint Type (Jt)",description:"1=干接缝，2=环氧树脂接缝，3=湿接缝，4=整体浇筑接缝",type:"select",options:[{value:1,label:"Dry Joint"},{value:2,label:"Epoxy Joint"},{value:3,label:"Wet Joint"},{value:4,label:"Monolithic Joint"}],defaultValue:1},{id:"specimen_type",label:"Specimen Type (St)",description:"1=单接缝(SJ)，2=双接缝(DJ)",type:"select",options:[{value:1,label:"Single Joint (SJ)"},{value:2,label:"Double Joint (DJ)"}],defaultValue:1},{id:"key_number",label:"Number of Keys (Nk)",description:"接缝中键槽的数量",type:"number",defaultValue:1,min:0,step:1}]},{title:"Geometric Parameters",color:"green",fields:[{id:"key_width",label:"Key Width (Bk)",description:"单个键槽的宽度",type:"number",defaultValue:35,step:.1,min:0},{id:"key_root_height",label:"Key Root Height (Hk)",description:"单个键槽根部的高度",type:"number",defaultValue:50,step:.1,min:0},{id:"key_depth",label:"Key Depth (Dk)",description:"单个键槽的深度",type:"number",defaultValue:25,step:.1,min:0},{id:"key_inclination",label:"Key Inclination (theta_k)",description:"单个键槽的倾斜角度",type:"number",defaultValue:34.5,step:.1},{id:"key_spacing",label:"Key Spacing (Sk)",description:"相邻键槽之间的距离",type:"number",defaultValue:50,step:.1,min:0},{id:"key_front_height",label:"Key Front Height (hk)",description:"单个键槽前部的高度",type:"number",defaultValue:25,step:.1,min:0},{id:"key_depth_height_ratio",label:"Key Depth-Height Ratio (Dk/Hk)",description:"键槽深度与高度的比值",type:"number",defaultValue:.5,step:.01,min:0},{id:"joint_width",label:"Joint Width (Bj)",description:"接缝的总宽度",type:"number",defaultValue:200,step:.1,min:0},{id:"joint_height",label:"Joint Height (Hj)",description:"接缝的总高度",type:"number",defaultValue:200,step:.1,min:0},{id:"key_area",label:"Key Area (Ak)",description:"接缝中键槽区域的总面积",type:"number",defaultValue:17500,step:.1,min:0},{id:"joint_area",label:"Joint Area (Aj)",description:"接缝的总面积",type:"number",defaultValue:4e4,step:.1,min:0},{id:"flat_region_area",label:"Flat Region Area (Asm)",description:"接缝中平坦区域的面积",type:"number",defaultValue:38250,step:.1,min:0},{id:"key_joint_area_ratio",label:"Key-Joint Area Ratio (Ak/Aj)",description:"键槽面积与接缝面积的比值",type:"number",defaultValue:.04,step:.01,min:0}]},{title:"UHPC Material Properties",color:"purple",fields:[{id:"compressive_strength",label:"Compressive Strength (fc)",description:"UHPC材料的抗压强度",type:"number",defaultValue:193,step:.1,min:0},{id:"fiber_type",label:"Fiber Type (Ft)",description:"0=无纤维，1=直纤维，2=混合纤维(直纤维和端钩纤维)，3=端钩纤维",type:"select",options:[{value:0,label:"No Fiber"},{value:1,label:"Straight Fiber"},{value:2,label:"Mixed Fiber (Straight and Hooked)"},{value:3,label:"Hooked Fiber"}],defaultValue:1},{id:"fiber_volume_fraction",label:"Fiber Volume Fraction (pf)",description:"纤维在UHPC中的体积分数",type:"number",defaultValue:.01,step:.01,min:0},{id:"fiber_length",label:"Fiber Length (lf)",description:"纤维的长度",type:"number",defaultValue:13,step:.1,min:0},{id:"fiber_diameter",label:"Fiber Diameter (df)",description:"纤维的直径",type:"number",defaultValue:.2,step:.01,min:0},{id:"fiber_reinforcing_index",label:"Fiber Reinforcing Index (lambda_f)",description:"纤维增强指数，计算公式为 pf\xd7lf/df",type:"number",defaultValue:65,step:.01,min:0}]},{title:"Confinement Stress Parameters",color:"orange",fields:[{id:"confining_stress",label:"Confinement Stress (sigma_n)",description:"约束应力值",type:"number",defaultValue:1,step:.1,min:0},{id:"confining_ratio",label:"Confinement Ratio (sigma_n/fc)",description:"约束应力与抗压强度之比",type:"number",defaultValue:.005,step:.001,min:0}]},{title:"Shear Strength",color:"red",fields:[{id:"shear_strength",label:"Shear Strength (tau_max)",description:"接缝的最大抗剪强度",type:"number",defaultValue:1421,step:.1,min:0}]}],i={};a.forEach(e=>{e.fields.forEach(e=>{i[e.id]=e.defaultValue})});let[n,d]=(0,r.useState)(i),[o,c]=(0,r.useState)({"Configuration Parameters":!0,"Geometric Parameters":!0,"UHPC Material Properties":!0,"Confinement Stress Parameters":!0,"Shear Strength":!0}),m=(e,t)=>{d(s=>({...s,[e]:t}))},x=e=>{c(t=>({...t,[e]:!t[e]}))},u={blue:{bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-800",button:"bg-blue-100 hover:bg-blue-200"},green:{bg:"bg-green-50",border:"border-green-200",text:"text-green-800",button:"bg-green-100 hover:bg-green-200"},purple:{bg:"bg-purple-50",border:"border-purple-200",text:"text-purple-800",button:"bg-purple-100 hover:bg-purple-200"},orange:{bg:"bg-orange-50",border:"border-orange-200",text:"text-orange-800",button:"bg-orange-100 hover:bg-orange-200"},red:{bg:"bg-red-50",border:"border-red-200",text:"text-red-800",button:"bg-red-100 hover:bg-red-200"}};return(0,l.jsxs)("div",{className:"w-full p-4 bg-white rounded-lg shadow-md",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"UHPC接缝特征参数输入"}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("button",{type:"button",onClick:()=>d(i),className:"text-sm px-3 py-1 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-md transition-colors",children:"重置默认值"}),(0,l.jsxs)("div",{className:"text-sm text-gray-600",children:["共 ",a.reduce((e,t)=>e+t.fields.length,0)," 个参数"]})]})]}),(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(Object.values(n))},className:"space-y-4",children:[(0,l.jsx)("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4",children:a.map(e=>{let t=u[e.color];return(0,l.jsxs)("div",{className:"border rounded-lg overflow-hidden ".concat(t.border," ").concat(t.bg),children:[(0,l.jsxs)("button",{type:"button",className:"w-full px-4 py-2 text-left font-semibold ".concat(t.text," ").concat(t.button," flex justify-between items-center"),onClick:()=>x(e.title),children:[(0,l.jsx)("span",{className:"text-sm font-medium",children:e.title}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("span",{className:"text-xs bg-white px-2 py-1 rounded-full",children:e.fields.length}),(0,l.jsx)("span",{className:"text-sm",children:o[e.title]?"▼":"►"})]})]}),o[e.title]&&(0,l.jsx)("div",{className:"p-3 bg-white border-t grid grid-cols-1 lg:grid-cols-2 gap-3",children:e.fields.map(e=>(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{className:"block text-gray-800 font-medium text-sm",children:e.label}),(0,l.jsx)("div",{className:"text-xs text-gray-600 mb-1 leading-tight",children:e.description}),"select"===e.type?(0,l.jsx)("select",{value:n[e.id],onChange:t=>m(e.id,Number(t.target.value)),className:"w-full p-2 text-sm border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800",children:e.options&&e.options.map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))}):(0,l.jsx)("input",{type:"number",step:e.step||1,min:void 0!==e.min?e.min:void 0,value:n[e.id],onChange:t=>m(e.id,Number(t.target.value)),className:"w-full p-2 text-sm border rounded focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-800"})]},e.id))})]},e.title)})}),(0,l.jsx)("div",{className:"pt-4 border-t",children:(0,l.jsx)("button",{type:"submit",disabled:s,className:"w-full py-3 px-4 rounded-lg font-semibold transition-all duration-200 ".concat(s?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 text-white shadow-md hover:shadow-lg"),children:s?(0,l.jsxs)("div",{className:"flex items-center justify-center",children:[(0,l.jsx)("div",{className:"animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full mr-2"}),"正在预测..."]}):"开始预测"})})]})]})},n=e=>{let{result:t}=e;if(!t)return null;let{modelName:s,confidence:r,processTime:a,individual_predictions:i,shear_capacity:n}=t;return(0,l.jsxs)("div",{className:"w-full bg-white rounded-lg shadow-md border border-gray-200",children:[(0,l.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white p-4 rounded-t-lg",children:(0,l.jsxs)("h2",{className:"text-lg font-bold flex items-center",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"预测结果"]})}),(0,l.jsxs)("div",{className:"p-4 space-y-4",children:[(0,l.jsx)("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-sm text-green-600 font-medium mb-1",children:"剪切承载力"}),(0,l.jsx)("div",{className:"text-2xl font-bold text-green-700",children:n.toFixed(2)}),(0,l.jsx)("div",{className:"text-sm text-green-600",children:"kN"})]})}),(0,l.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200",children:[(0,l.jsxs)("h3",{className:"text-sm font-semibold text-blue-800 mb-2 flex items-center",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"模型信息"]}),(0,l.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"使用模型:"}),(0,l.jsx)("span",{className:"font-medium text-blue-800",children:s})]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"置信度:"}),(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"w-16 bg-gray-200 rounded-full h-1.5 mr-2",children:(0,l.jsx)("div",{className:"bg-blue-600 h-1.5 rounded-full",style:{width:"".concat(100*r,"%")}})}),(0,l.jsxs)("span",{className:"font-medium text-gray-700 text-xs",children:[(100*r).toFixed(1),"%"]})]})]}),(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsx)("span",{className:"text-gray-600",children:"处理时间:"}),(0,l.jsx)("span",{className:"font-medium text-gray-700",children:a})]})]})]}),(0,l.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200",children:[(0,l.jsxs)("h3",{className:"text-sm font-semibold text-gray-800 mb-2 flex items-center",children:[(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"个体预测详情"]}),(0,l.jsx)("div",{className:"space-y-2",children:i.map((e,t)=>{let s=(e-n)/n*100;return(0,l.jsxs)("div",{className:"flex justify-between items-center py-1.5 px-2 bg-white rounded border text-sm",children:[(0,l.jsxs)("span",{className:"text-gray-600",children:["预测 ",t+1,":"]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("span",{className:"font-medium text-gray-800",children:e.toFixed(1)}),(0,l.jsxs)("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium ".concat(s>0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:[s>0?"+":"",s.toFixed(1),"%"]})]})]},t)})})]}),(0,l.jsx)("div",{className:"bg-yellow-50 p-3 rounded-lg border border-yellow-200",children:(0,l.jsxs)("div",{className:"flex items-start",children:[(0,l.jsx)("svg",{className:"h-4 w-4 text-yellow-500 mt-0.5 mr-2 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-sm font-medium text-yellow-800 mb-1",children:"预测说明"}),(0,l.jsx)("p",{className:"text-xs text-yellow-700 leading-relaxed",children:"此预测结果仅供参考。实际剪切承载力可能受多种因素影响。最终结果由多次预测的平均值得出。"})]})]})})]})]})};function d(){let[e,t]=(0,r.useState)([]),[s,d]=(0,r.useState)("randomForest"),[o,c]=(0,r.useState)(!1),[m,x]=(0,r.useState)(null),[u,b]=(0,r.useState)("");(0,r.useEffect)(()=>{!async function(){try{let e=await fetch("".concat("","/api/models"));if(!e.ok)throw Error("获取模型列表失败");let s=await e.json();t(s)}catch(e){console.error("获取模型时出错:",e),b("无法连接到服务器。请确保后端服务正在运行。")}}()},[]);let h=async e=>{c(!0),b("");try{let t=await fetch("".concat("","/api/predict"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({modelType:s,features:e})});if(!t.ok)throw Error("预测请求失败");let l=await t.json();x(l)}catch(e){console.error("预测过程中出错:",e),b("预测失败。请稍后再试。")}finally{c(!1)}};return(0,l.jsxs)("main",{className:"min-h-screen bg-gray-50",children:[(0,l.jsxs)("div",{className:"max-w-7xl mx-auto p-4 md:p-6",children:[(0,l.jsxs)("header",{className:"text-center mb-6",children:[(0,l.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-gray-800 mb-2",children:"多模型机器学习预测系统"}),(0,l.jsxs)("p",{className:"text-gray-600",children:["\xa9 ",new Date().getFullYear()," 长沙理工大学 - 李嘉俊"]})]}),u&&(0,l.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-6",children:(0,l.jsx)("p",{children:u})}),e.length>0?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"mb-6",children:(0,l.jsx)(a,{models:e,selectedModel:s,onSelectModel:e=>{d(e)}})}),(0,l.jsxs)("div",{className:"grid lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[(0,l.jsx)("div",{className:"lg:col-span-2 xl:col-span-3",children:(0,l.jsx)(i,{onSubmit:h,isLoading:o})}),(0,l.jsx)("div",{className:"lg:col-span-1 xl:col-span-1",children:(0,l.jsx)("div",{className:"sticky top-6",children:m?(0,l.jsx)(n,{result:m}):(0,l.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md border-2 border-dashed border-gray-300",children:(0,l.jsxs)("div",{className:"text-center text-gray-500",children:[(0,l.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),(0,l.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"等待预测结果"}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"请在左侧输入参数并点击“开始预测”按钮"}),!1]})})})})]})]}):u?null:(0,l.jsxs)("div",{className:"text-center py-16",children:[(0,l.jsx)("div",{className:"inline-block h-12 w-12 animate-spin rounded-full border-4 border-solid border-blue-600 border-r-transparent mb-4"}),(0,l.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"正在加载模型"}),(0,l.jsx)("p",{className:"text-gray-600",children:"请稍等，正在连接服务器..."})]})]}),(0,l.jsxs)("footer",{className:"text-center mt-12 py-4 text-sm text-gray-500 border-t",children:[(0,l.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," 长沙理工大学 - 李嘉俊"]}),(0,l.jsx)("a",{href:"https://beian.miit.gov.cn/",target:"_blank",rel:"noopener noreferrer",children:"湘ICP备2021017124号-1"})]})]})}},9325:(e,t,s)=>{Promise.resolve().then(s.bind(s,8483))}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(9325)),_N_E=e.O()}]);